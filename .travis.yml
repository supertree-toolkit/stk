language: python
python:
  - "2.7"
cache: pip
before_install:
  - sudo apt-get -qq update
  - sudo apt-get install -y xvfb gir1.2-gtk-3.0 python-gi python-gi-cairo pep8 pyflakes python-pytest python-tk python-simplejson python-pygraphviz python-lxml-dbg python-lxml python-gtk2 python-numpy python-matplotlib python-lxml libxml2-utils python python-gtksourceview2 python-glade2 python-networkx python-argcomplete libcairo2-dev libgtk2.0-dev
install:
    # PyGobject
    - wget http://ftp.gnome.org/pub/GNOME/sources/pygobject/2.28/pygobject-2.28.6.tar.bz2
    - tar xf pygobject-2.28.6.tar.bz2
    - cd pygobject-2.28.6
    - ./configure --prefix=$VIRT_ROOT --disable-introspection > /dev/null
    - make > /dev/null
    - sudo make install > /dev/null
    - cd ..
    # PyGtk
    - wget http://ftp.gnome.org/pub/GNOME/sources/pygtk/2.24/pygtk-2.24.0.tar.bz2
    - tar xf pygtk-2.24.0.tar.bz2
    - cd pygtk-2.24.0
    - ./configure --prefix=$VIRT_ROOT > /dev/null
    - make > /dev/null
    - sudo make install > /dev/null
    - cd ..
      # get all the python mods in the virtenv
    - pip install -r requirements.txt
script:
  - make test
